import{_ as ue,G as J,ad as te,H as p,af as re,s as se,J as K,Y as Q,K as R,L as G,r as t,k as de,a5 as ce,v as ge,Z as pe,$ as y,ag as me,ah as ve,a9 as be,A as M,o,P as h,w as I,O as i,V as T,b as v,T as C,c as d,a0 as g,a as S,U as fe,F as ye,aa as Me,t as Z,N as he,d as D,ai as Ie}from"./entry.LFM_JvCg.js";import{u as Ce}from"./usePopper.jlYbm5qE.js";import{u as Se}from"./useFormGroup.7Pt6L2QS.js";import{Z as Ae,t as Oe,l as ke,a as qe,o as we}from"./combobox.-0aFsCUl.js";import"./uid.KLLbMoZc.js";import"./form.B8z1LJL_.js";import"./keyboard.IE1kcyyG.js";import"./use-outside-click.V7AUcKez.js";import"./focus-management.QsA4ecDa.js";import"./use-resolve-button-type.8VLVHwJT.js";import"./calculate-active-index.mkObhLki.js";import"./hidden.2aPAslxq.js";import"./open-closed.-z27p9Q9.js";import"./disposables.HMegUYH-.js";import"./micro-task.ZxAilEVg.js";const r=J(p.ui.strategy,p.ui.input,te),L=J(p.ui.strategy,p.ui.inputMenu,re),Be=se({components:{HCombobox:Ae,HComboboxButton:Oe,HComboboxOptions:ke,HComboboxOption:qe,HComboboxInput:we,UIcon:K,UAvatar:Q},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>r.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>L.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>L.default.selectedIcon},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(r.size).includes(e)}},color:{type:String,default:()=>r.default.color,validator(e){return[...p.ui.colors,...Object.keys(r.color)].includes(e)}},variant:{type:String,default:()=>r.default.variant,validator(e){return[...Object.keys(r.variant),...Object.values(r.color).flatMap(s=>Object.keys(s))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},search:{type:Function,default:void 0},searchAttributes:{type:Array,default:null},debounce:{type:Number,default:200},popper:{type:Object,default:()=>({})},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:s,slots:B}){const{ui:a,attrs:W}=R("input",G(e,"ui"),r,G(e,"class")),{ui:H}=R("inputMenu",G(e,"uiMenu"),L),A=t(()=>de({},e.popper,H.value.popper)),[m,O]=Ce(A.value),{size:z,rounded:N}=ce({ui:a,props:e}),{emitFormBlur:V,emitFormChange:$,inputId:j,color:n,size:U,name:b}=Se(e,r),u=t(()=>z.value||U.value),k=ge(""),c=t({get(){return e.query??k.value},set(l){k.value=l,s("update:query",l)}}),Y=t(()=>{var f,w;const l=((w=(f=a.value.color)==null?void 0:f[n.value])==null?void 0:w[e.variant])||a.value.variant[e.variant];return pe(y(a.value.base,a.value.form,N.value,a.value.placeholder,a.value.size[u.value],e.padded?a.value.padding[u.value]:"p-0",l==null?void 0:l.replaceAll("{color}",n.value),(q.value||B.leading)&&a.value.leading.padding[u.value],(E.value||B.trailing)&&a.value.trailing.padding[u.value]),e.inputClass)}),q=t(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),E=t(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),X=t(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),_=t(()=>e.loading&&!q.value?e.loadingIcon:e.trailingIcon||e.icon),x=t(()=>y(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[u.value])),ee=t(()=>y(a.value.icon.base,n.value&&p.ui.colors.includes(n.value)&&a.value.icon.color.replaceAll("{color}",n.value),a.value.icon.size[u.value],e.loading&&a.value.icon.loading)),ae=t(()=>y(a.value.icon.trailing.wrapper,a.value.icon.trailing.padding[u.value])),ne=t(()=>y(a.value.icon.base,n.value&&p.ui.colors.includes(n.value)&&a.value.icon.color.replaceAll("{color}",n.value),a.value.icon.size[u.value],e.loading&&!q.value&&a.value.icon.loading)),P=e.search&&typeof e.search=="function"?me(e.search,e.debounce):void 0,le=ve(async()=>P?await P(c.value):c.value===""?e.options:e.options.filter(l=>{var f;return((f=e.searchAttributes)!=null&&f.length?e.searchAttributes:[e.optionAttribute]).some(w=>{if(["string","number"].includes(typeof l))return String(l).search(new RegExp(c.value,"i"))!==-1;const F=Ie(l,w);return F!=null&&String(F).search(new RegExp(c.value,"i"))!==-1})}));be(O,l=>{l?s("open"):(s("close"),V())});function ie(l){c.value="",s("update:modelValue",l),s("change",l),$()}function oe(l){c.value=l.target.value}return{ui:a,uiMenu:H,attrs:W,name:b,inputId:j,popper:A,trigger:m,container:O,isLeading:q,isTrailing:E,inputClass:Y,leadingIconName:X,leadingIconClass:ee,leadingWrapperIconClass:x,trailingIconName:_,trailingIconClass:ne,trailingWrapperIconClass:ae,filteredOptions:le,query:c,onUpdate:ie,onChange:oe}}}),He={class:"truncate"};function ze(e,s,B,a,W,H){const A=M("HComboboxInput"),m=K,O=M("HComboboxButton"),z=Q,N=M("HComboboxOption"),V=M("HComboboxOptions"),$=M("HCombobox");return o(),h($,{by:e.by,name:e.name,"model-value":e.modelValue,disabled:e.disabled,as:"div",class:i(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:I(({open:j})=>[S("div",{class:i(e.uiMenu.trigger)},[v(A,T({id:e.inputId,name:e.name,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass,autocomplete:"off"},e.attrs,{"display-value":()=>e.query?e.query:["string","number"].includes(typeof e.modelValue)?e.modelValue:e.modelValue[e.optionAttribute],onChange:e.onChange}),null,16,["id","name","required","placeholder","disabled","class","display-value","onChange"]),e.isLeading&&e.leadingIconName||e.$slots.leading?(o(),d("span",{key:0,class:i(e.leadingWrapperIconClass)},[C(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[v(m,{name:e.leadingIconName,class:i(e.leadingIconClass)},null,8,["name","class"])])],2)):g("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(o(),h(O,{key:1,ref:"trigger",class:i(e.trailingWrapperIconClass)},{default:I(()=>[C(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[v(m,{name:e.trailingIconName,class:i(e.trailingIconClass)},null,8,["name","class"])])]),_:3},8,["class"])):g("",!0)],2),j?(o(),d("div",{key:0,ref:"container",class:i([e.uiMenu.container,e.uiMenu.width])},[v(fe,T({appear:""},e.uiMenu.transition),{default:I(()=>[S("div",null,[e.popper.arrow?(o(),d("div",{key:0,"data-popper-arrow":"",class:i(Object.values(e.uiMenu.arrow))},null,2)):g("",!0),v(V,{static:"",class:i([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:I(()=>[(o(!0),d(ye,null,he(e.filteredOptions,(n,U)=>(o(),h(N,{key:U,as:"template",value:e.valueAttribute?n[e.valueAttribute]:n,disabled:n.disabled},{default:I(({active:b,selected:u,disabled:k})=>[S("li",{class:i([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,b?e.uiMenu.option.active:e.uiMenu.option.inactive,u&&e.uiMenu.option.selected,k&&e.uiMenu.option.disabled])},[S("div",{class:i(e.uiMenu.option.container)},[C(e.$slots,"option",{option:n,active:b,selected:u},()=>[n.icon?(o(),h(m,{key:0,name:n.icon,class:i([e.uiMenu.option.icon.base,b?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,n.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):n.avatar?(o(),h(z,T({key:1},{size:e.uiMenu.option.avatar.size,...n.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):n.chip?(o(),d("span",{key:2,class:i(e.uiMenu.option.chip.base),style:Me({background:`#${n.chip}`})},null,6)):g("",!0),S("span",He,Z(["string","number"].includes(typeof n)?n:n[e.optionAttribute]),1)])],2),u?(o(),d("span",{key:0,class:i([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[v(m,{name:e.selectedIcon,class:i(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):g("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.query&&!e.filteredOptions.length?(o(),d("p",{key:0,class:i(e.uiMenu.option.empty)},[C(e.$slots,"option-empty",{query:e.query},()=>[D(' No results for "'+Z(e.query)+'". ',1)])],2)):e.filteredOptions.length?g("",!0):(o(),d("p",{key:1,class:i(e.uiMenu.empty)},[C(e.$slots,"empty",{query:e.query},()=>[D(" No options. ")])],2))]),_:3},8,["class"])])]),_:3},16)],2)):g("",!0)]),_:3},8,["by","name","model-value","disabled","class","onUpdate:modelValue"])}const Je=ue(Be,[["render",ze]]);export{Je as default};
