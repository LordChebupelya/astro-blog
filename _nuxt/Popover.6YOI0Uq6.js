import{aB as we,s as z,v as k,r as C,B as de,D as Q,y as F,F as X,x,C as ce,E as _,_ as $e,G as ke,H as le,K as Ce,L as ne,k as Ee,a9 as re,A as U,o as D,P as ue,w as A,O as H,a as se,T as ie,b as V,U as pe,V as q,c as W,a0 as R,aa as Oe}from"./entry.LFM_JvCg.js";import{u as Be}from"./usePopper.jlYbm5qE.js";import{A as Te,N as Fe,E as Ie,n as fe,d as B}from"./portal.ue7ueRIc.js";import{o as a,u as N,A as ee,t as j,N as ve,a as I}from"./keyboard.IE1kcyyG.js";import{w as Me}from"./use-outside-click.V7AUcKez.js";import{s as Ne}from"./use-resolve-button-type.8VLVHwJT.js";import{f as Y,s as Z}from"./hidden.2aPAslxq.js";import{t as De,i as K,l as Ae}from"./open-closed.-z27p9Q9.js";import{i as oe,E as te,w as He,h as je,P as M,N as T,T as J}from"./focus-management.QsA4ecDa.js";const Le={wrapper:"relative",container:"z-50 group",trigger:"inline-flex w-full",width:"",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-md",ring:"ring-1 ring-gray-200 dark:ring-gray-800",base:"overflow-hidden focus:outline-none relative",transition:{enterActiveClass:"transition ease-out duration-200",enterFromClass:"opacity-0 translate-y-1",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"transition ease-in duration-150",leaveFromClass:"opacity-100 translate-y-0",leaveToClass:"opacity-0 translate-y-1"},overlay:{base:"fixed inset-0 transition-opacity z-50",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enterActiveClass:"ease-out duration-200",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in duration-150",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"}},popper:{strategy:"fixed"},arrow:we};var Ge=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ge||{});let ge=Symbol("PopoverContext");function ae(e){let S=_(ge,null);if(S===null){let h=new Error(`<${e} /> is missing a parent <${ye.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(h,ae),h}return S}let Re=Symbol("PopoverGroupContext");function me(){return _(Re,null)}let be=Symbol("PopoverPanelContext");function Ke(){return _(be,null)}let ye=z({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:S,attrs:h,expose:E}){var t;let o=k(null);E({el:o,$el:o});let b=k(1),g=k(null),c=k(null),f=k(null),i=k(null),w=C(()=>oe(o)),O=C(()=>{var n,u;if(!a(g)||!a(i))return!1;for(let G of document.querySelectorAll("body > *"))if(Number(G==null?void 0:G.contains(a(g)))^Number(G==null?void 0:G.contains(a(i))))return!0;let d=te(),$=d.indexOf(a(g)),L=($+d.length-1)%d.length,Pe=($+1)%d.length,Se=d[L],he=d[Pe];return!((n=a(i))!=null&&n.contains(Se))&&!((u=a(i))!=null&&u.contains(he))}),y={popoverState:b,buttonId:k(null),panelId:k(null),panel:i,button:g,isPortalled:O,beforePanelSentinel:c,afterPanelSentinel:f,togglePopover(){b.value=N(b.value,{0:1,1:0})},closePopover(){b.value!==1&&(b.value=1)},close(n){y.closePopover();let u=n?n instanceof HTMLElement?n:n.value instanceof HTMLElement?a(n):a(y.button):a(y.button);u==null||u.focus()}};de(ge,y),De(C(()=>N(b.value,{0:K.Open,1:K.Closed})));let P={buttonId:y.buttonId,panelId:y.panelId,close(){y.closePopover()}},p=me(),r=p==null?void 0:p.registerPopover,[v,s]=Te(),l=Fe({mainTreeNodeRef:p==null?void 0:p.mainTreeNodeRef,portals:v,defaultContainers:[g,i]});function m(){var n,u,d,$;return($=p==null?void 0:p.isFocusWithinPopoverGroup())!=null?$:((n=w.value)==null?void 0:n.activeElement)&&(((u=a(g))==null?void 0:u.contains(w.value.activeElement))||((d=a(i))==null?void 0:d.contains(w.value.activeElement)))}return Q(()=>r==null?void 0:r(P)),Ie((t=w.value)==null?void 0:t.defaultView,"focus",n=>{var u,d;n.target!==window&&n.target instanceof HTMLElement&&b.value===0&&(m()||g&&i&&(l.contains(n.target)||(u=a(y.beforePanelSentinel))!=null&&u.contains(n.target)||(d=a(y.afterPanelSentinel))!=null&&d.contains(n.target)||y.closePopover()))},!0),Me(l.resolveContainers,(n,u)=>{var d;y.closePopover(),He(u,je.Loose)||(n.preventDefault(),(d=a(g))==null||d.focus())},C(()=>b.value===0)),()=>{let n={open:b.value===0,close:y.close};return F(X,[F(s,{},()=>ee({theirProps:{...e,...h},ourProps:{ref:o},slot:n,slots:S,attrs:h,name:"Popover"})),F(l.MainTreeNode)])}}}),ze=z({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${j()}`}},inheritAttrs:!1,setup(e,{attrs:S,slots:h,expose:E}){let t=ae("PopoverButton"),o=C(()=>oe(t.button));E({el:t.button,$el:t.button}),x(()=>{t.buttonId.value=e.id}),ce(()=>{t.buttonId.value=null});let b=me(),g=b==null?void 0:b.closeOthers,c=Ke(),f=C(()=>c===null?!1:c.value===t.panelId.value),i=k(null),w=`headlessui-focus-sentinel-${j()}`;f.value||Q(()=>{t.button.value=a(i)});let O=Ne(C(()=>({as:e.as,type:S.type})),i);function y(l){var m,n,u,d,$;if(f.value){if(t.popoverState.value===1)return;switch(l.key){case I.Space:case I.Enter:l.preventDefault(),(n=(m=l.target).click)==null||n.call(m),t.closePopover(),(u=a(t.button))==null||u.focus();break}}else switch(l.key){case I.Space:case I.Enter:l.preventDefault(),l.stopPropagation(),t.popoverState.value===1&&(g==null||g(t.buttonId.value)),t.togglePopover();break;case I.Escape:if(t.popoverState.value!==0)return g==null?void 0:g(t.buttonId.value);if(!a(t.button)||(d=o.value)!=null&&d.activeElement&&!(($=a(t.button))!=null&&$.contains(o.value.activeElement)))return;l.preventDefault(),l.stopPropagation(),t.closePopover();break}}function P(l){f.value||l.key===I.Space&&l.preventDefault()}function p(l){var m,n;e.disabled||(f.value?(t.closePopover(),(m=a(t.button))==null||m.focus()):(l.preventDefault(),l.stopPropagation(),t.popoverState.value===1&&(g==null||g(t.buttonId.value)),t.togglePopover(),(n=a(t.button))==null||n.focus()))}function r(l){l.preventDefault(),l.stopPropagation()}let v=fe();function s(){let l=a(t.panel);if(!l)return;function m(){N(v.value,{[B.Forwards]:()=>M(l,T.First),[B.Backwards]:()=>M(l,T.Last)})===J.Error&&M(te().filter(n=>n.dataset.headlessuiFocusGuard!=="true"),N(v.value,{[B.Forwards]:T.Next,[B.Backwards]:T.Previous}),{relativeTo:a(t.button)})}m()}return()=>{let l=t.popoverState.value===0,m={open:l},{id:n,...u}=e,d=f.value?{ref:i,type:O.value,onKeydown:y,onClick:p}:{ref:i,id:n,type:O.value,"aria-expanded":t.popoverState.value===0,"aria-controls":a(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:y,onKeyup:P,onClick:p,onMousedown:r};return F(X,[ee({ourProps:d,theirProps:{...S,...u},slot:m,attrs:S,slots:h,name:"PopoverButton"}),l&&!f.value&&t.isPortalled.value&&F(Y,{id:w,features:Z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:s})])}}}),Ue=z({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${j()}`}},inheritAttrs:!1,setup(e,{attrs:S,slots:h,expose:E}){let{focus:t}=e,o=ae("PopoverPanel"),b=C(()=>oe(o.panel)),g=`headlessui-focus-sentinel-before-${j()}`,c=`headlessui-focus-sentinel-after-${j()}`;E({el:o.panel,$el:o.panel}),x(()=>{o.panelId.value=e.id}),ce(()=>{o.panelId.value=null}),de(be,o.panelId),Q(()=>{var r,v;if(!t||o.popoverState.value!==0||!o.panel)return;let s=(r=b.value)==null?void 0:r.activeElement;(v=a(o.panel))!=null&&v.contains(s)||M(a(o.panel),T.First)});let f=Ae(),i=C(()=>f!==null?(f.value&K.Open)===K.Open:o.popoverState.value===0);function w(r){var v,s;switch(r.key){case I.Escape:if(o.popoverState.value!==0||!a(o.panel)||b.value&&!((v=a(o.panel))!=null&&v.contains(b.value.activeElement)))return;r.preventDefault(),r.stopPropagation(),o.closePopover(),(s=a(o.button))==null||s.focus();break}}function O(r){var v,s,l,m,n;let u=r.relatedTarget;u&&a(o.panel)&&((v=a(o.panel))!=null&&v.contains(u)||(o.closePopover(),((l=(s=a(o.beforePanelSentinel))==null?void 0:s.contains)!=null&&l.call(s,u)||(n=(m=a(o.afterPanelSentinel))==null?void 0:m.contains)!=null&&n.call(m,u))&&u.focus({preventScroll:!0})))}let y=fe();function P(){let r=a(o.panel);if(!r)return;function v(){N(y.value,{[B.Forwards]:()=>{var s;M(r,T.First)===J.Error&&((s=a(o.afterPanelSentinel))==null||s.focus())},[B.Backwards]:()=>{var s;(s=a(o.button))==null||s.focus({preventScroll:!0})}})}v()}function p(){let r=a(o.panel);if(!r)return;function v(){N(y.value,{[B.Forwards]:()=>{let s=a(o.button),l=a(o.panel);if(!s)return;let m=te(),n=m.indexOf(s),u=m.slice(0,n+1),d=[...m.slice(n+1),...u];for(let $ of d.slice())if($.dataset.headlessuiFocusGuard==="true"||l!=null&&l.contains($)){let L=d.indexOf($);L!==-1&&d.splice(L,1)}M(d,T.First,{sorted:!1})},[B.Backwards]:()=>{var s;M(r,T.Previous)===J.Error&&((s=a(o.button))==null||s.focus())}})}v()}return()=>{let r={open:o.popoverState.value===0,close:o.close},{id:v,focus:s,...l}=e,m={ref:o.panel,id:v,onKeydown:w,onFocusout:t&&o.popoverState.value===0?O:void 0,tabIndex:-1};return ee({ourProps:m,theirProps:{...S,...l},attrs:S,slot:r,slots:{...h,default:(...n)=>{var u;return[F(X,[i.value&&o.isPortalled.value&&F(Y,{id:g,ref:o.beforePanelSentinel,features:Z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:P}),(u=h.default)==null?void 0:u.call(h,...n),i.value&&o.isPortalled.value&&F(Y,{id:c,ref:o.afterPanelSentinel,features:Z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:p})])]}},features:ve.RenderStrategy|ve.Static,visible:i.value,name:"PopoverPanel"})}}});const Ve=ke(le.ui.strategy,le.ui.popover,Le),qe=z({components:{HPopover:ye,HPopoverButton:ze,HPopoverPanel:Ue},inheritAttrs:!1,props:{mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},overlay:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:open"],setup(e,{emit:S}){const{ui:h,attrs:E}=Ce("popover",ne(e,"ui"),Ve,ne(e,"class")),t=C(()=>Ee(e.mode==="hover"?{offsetDistance:0}:{},e.popper,h.value.popper)),[o,b]=Be(t.value),g=k(null),c=k(null);let f=null,i=null;x(()=>{var r,v;const P=(r=g.value)==null?void 0:r.$.provides;if(!P)return;const p=Object.getOwnPropertySymbols(P);c.value=p.length&&P[p[0]],e.open&&((v=c.value)==null||v.togglePopover())});const w=C(()=>{var v,s,l;if(e.mode!=="hover")return{};const P=((v=e.popper)==null?void 0:v.offsetDistance)||((s=h.value.popper)==null?void 0:s.offsetDistance)||8,p=(l=t.value.placement)==null?void 0:l.split("-")[0],r=`${P}px`;return p==="top"||p==="bottom"?{paddingTop:r,paddingBottom:r}:p==="left"||p==="right"?{paddingLeft:r,paddingRight:r}:{paddingTop:r,paddingBottom:r,paddingLeft:r,paddingRight:r}});function O(){e.mode!=="hover"||!c.value||(i&&(clearTimeout(i),i=null),c.value.popoverState!==0&&(f=f||setTimeout(()=>{c.value.togglePopover&&c.value.togglePopover(),f=null},e.openDelay)))}function y(){e.mode!=="hover"||!c.value||(f&&(clearTimeout(f),f=null),c.value.popoverState!==1&&(i=i||setTimeout(()=>{c.value.closePopover&&c.value.closePopover(),i=null},e.closeDelay)))}return re(()=>e.open,(P,p)=>{c.value&&(p===void 0||P===p||(P?c.value.popoverState=0:c.value.closePopover()))}),re(()=>{var P;return(P=c.value)==null?void 0:P.popoverState},(P,p)=>{p===void 0||P===p||S("update:open",P===0)}),{ui:h,attrs:E,popover:g,popper:t,trigger:o,container:b,containerStyle:w,onMouseOver:O,onMouseLeave:y}}}),We=["disabled"];function Ye(e,S,h,E,t,o){const b=U("HPopoverButton"),g=U("HPopoverPanel"),c=U("HPopover");return D(),ue(c,q({ref:"popover",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:A(({open:f,close:i})=>[V(b,{ref:"trigger",as:"div",disabled:e.disabled,class:H(e.ui.trigger),role:"button",onMouseover:e.onMouseOver},{default:A(()=>[ie(e.$slots,"default",{open:f,close:i},()=>[se("button",{disabled:e.disabled}," Open ",8,We)])]),_:2},1032,["disabled","class","onMouseover"]),e.overlay?(D(),ue(pe,q({key:0,appear:""},e.ui.overlay.transition),{default:A(()=>[f?(D(),W("div",{key:0,class:H([e.ui.overlay.base,e.ui.overlay.background])},null,2)):R("",!0)]),_:2},1040)):R("",!0),f?(D(),W("div",{key:1,ref:"container",class:H([e.ui.container,e.ui.width]),style:Oe(e.containerStyle),onMouseover:S[0]||(S[0]=(...w)=>e.onMouseOver&&e.onMouseOver(...w))},[V(pe,q({appear:""},e.ui.transition),{default:A(()=>[se("div",null,[e.popper.arrow?(D(),W("div",{key:0,"data-popper-arrow":"",class:H(Object.values(e.ui.arrow))},null,2)):R("",!0),V(g,{class:H([e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow]),static:""},{default:A(()=>[ie(e.$slots,"panel",{open:f,close:i})]),_:2},1032,["class"])])]),_:2},1040)],38)):R("",!0)]),_:3},16,["class","onMouseleave"])}const ao=$e(qe,[["render",Ye]]);export{ao as default};
