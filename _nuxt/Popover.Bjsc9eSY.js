import{u as $e}from"./id.D2nBIKFp.js";import{aJ as ke,s as q,v as C,r as E,C as ge,E as _,y as D,F as ee,x as oe,D as be,G as te,_ as Ce,H as Ee,I as ue,L as Fe,M as se,k as Be,ad as ie,B as W,o as H,Q as pe,w as L,b as J,P as j,S as ve,a as de,V as ce,W as Q,c as V,a1 as K,af as Ie}from"./entry.qOecQ0k9.js";import{A as Oe,N as Te,E as De,n as me,d as O}from"./portal.AVay_crM.js";import{o as l,u as A,A as ae,I as G,N as fe,a as M,l as Me}from"./keyboard.DdECLMQg.js";import{w as Ne}from"./use-outside-click.DLIGxh-p.js";import{s as Ae}from"./use-resolve-button-type.D80JmMvP.js";import{f as Y,s as Z}from"./hidden.DOYmC_oS.js";import{t as He,i as U,l as Le}from"./open-closed.DF1t0dQU.js";import{i as le,E as ne,w as je,h as Ge,P as N,N as T,T as x}from"./focus-management.D4Qn_2OM.js";import{u as Re}from"./usePopper.XSG-7m4f.js";const ze={wrapper:"relative",container:"z-50 group",trigger:"inline-flex w-full",width:"",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-md",ring:"ring-1 ring-gray-200 dark:ring-gray-800",base:"overflow-hidden focus:outline-none relative",transition:{enterActiveClass:"transition ease-out duration-200",enterFromClass:"opacity-0 translate-y-1",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"transition ease-in duration-150",leaveFromClass:"opacity-100 translate-y-0",leaveToClass:"opacity-0 translate-y-1"},overlay:{base:"fixed inset-0 transition-opacity z-50",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enterActiveClass:"ease-out duration-200",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in duration-150",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"}},popper:{strategy:"fixed"},default:{openDelay:0,closeDelay:0},arrow:ke};var Ke=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ke||{});let ye=Symbol("PopoverContext");function re(e){let P=te(ye,null);if(P===null){let S=new Error(`<${e} /> is missing a parent <${he.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(S,re),S}return P}let Ue=Symbol("PopoverGroupContext");function Pe(){return te(Ue,null)}let Se=Symbol("PopoverPanelContext");function qe(){return te(Se,null)}let he=q({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:P,attrs:S,expose:B}){var h;let w=C(null);B({el:w,$el:w});let a=C(1),t=C(null),i=C(null),c=C(null),p=C(null),g=E(()=>le(w)),$=E(()=>{var o,r;if(!l(t)||!l(p))return!1;for(let z of document.querySelectorAll("body > *"))if(Number(z==null?void 0:z.contains(l(t)))^Number(z==null?void 0:z.contains(l(p))))return!0;let n=ne(),y=n.indexOf(l(t)),F=(y+n.length-1)%n.length,I=(y+1)%n.length,R=n[F],we=n[I];return!((o=l(p))!=null&&o.contains(R))&&!((r=l(p))!=null&&r.contains(we))}),b={popoverState:a,buttonId:C(null),panelId:C(null),panel:p,button:t,isPortalled:$,beforePanelSentinel:i,afterPanelSentinel:c,togglePopover(){a.value=A(a.value,{0:1,1:0})},closePopover(){a.value!==1&&(a.value=1)},close(o){b.closePopover();let r=o?o instanceof HTMLElement?o:o.value instanceof HTMLElement?l(o):l(b.button):l(b.button);r==null||r.focus()}};ge(ye,b),He(E(()=>A(a.value,{0:U.Open,1:U.Closed})));let f={buttonId:b.buttonId,panelId:b.panelId,close(){b.closePopover()}},u=Pe(),m=u==null?void 0:u.registerPopover,[k,v]=Oe(),d=Te({mainTreeNodeRef:u==null?void 0:u.mainTreeNodeRef,portals:k,defaultContainers:[t,p]});function s(){var o,r,n,y;return(y=u==null?void 0:u.isFocusWithinPopoverGroup())!=null?y:((o=g.value)==null?void 0:o.activeElement)&&(((r=l(t))==null?void 0:r.contains(g.value.activeElement))||((n=l(p))==null?void 0:n.contains(g.value.activeElement)))}return _(()=>m==null?void 0:m(f)),De((h=g.value)==null?void 0:h.defaultView,"focus",o=>{var r,n;o.target!==window&&o.target instanceof HTMLElement&&a.value===0&&(s()||t&&p&&(d.contains(o.target)||(r=l(b.beforePanelSentinel))!=null&&r.contains(o.target)||(n=l(b.afterPanelSentinel))!=null&&n.contains(o.target)||b.closePopover()))},!0),Ne(d.resolveContainers,(o,r)=>{var n;b.closePopover(),je(r,Ge.Loose)||(o.preventDefault(),(n=l(t))==null||n.focus())},E(()=>a.value===0)),()=>{let o={open:a.value===0,close:b.close};return D(ee,[D(v,{},()=>ae({theirProps:{...e,...S},ourProps:{ref:w},slot:o,slots:P,attrs:S,name:"Popover"})),D(d.MainTreeNode)])}}}),We=q({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:P,slots:S,expose:B}){var h;let w=(h=e.id)!=null?h:`headlessui-popover-button-${G()}`,a=re("PopoverButton"),t=E(()=>le(a.button));B({el:a.button,$el:a.button}),oe(()=>{a.buttonId.value=w}),be(()=>{a.buttonId.value=null});let i=Pe(),c=i==null?void 0:i.closeOthers,p=qe(),g=E(()=>p===null?!1:p.value===a.panelId.value),$=C(null),b=`headlessui-focus-sentinel-${G()}`;g.value||_(()=>{a.button.value=l($)});let f=Ae(E(()=>({as:e.as,type:P.type})),$);function u(o){var r,n,y,F,I;if(g.value){if(a.popoverState.value===1)return;switch(o.key){case M.Space:case M.Enter:o.preventDefault(),(n=(r=o.target).click)==null||n.call(r),a.closePopover(),(y=l(a.button))==null||y.focus();break}}else switch(o.key){case M.Space:case M.Enter:o.preventDefault(),o.stopPropagation(),a.popoverState.value===1&&(c==null||c(a.buttonId.value)),a.togglePopover();break;case M.Escape:if(a.popoverState.value!==0)return c==null?void 0:c(a.buttonId.value);if(!l(a.button)||(F=t.value)!=null&&F.activeElement&&!((I=l(a.button))!=null&&I.contains(t.value.activeElement)))return;o.preventDefault(),o.stopPropagation(),a.closePopover();break}}function m(o){g.value||o.key===M.Space&&o.preventDefault()}function k(o){var r,n;e.disabled||(g.value?(a.closePopover(),(r=l(a.button))==null||r.focus()):(o.preventDefault(),o.stopPropagation(),a.popoverState.value===1&&(c==null||c(a.buttonId.value)),a.togglePopover(),(n=l(a.button))==null||n.focus()))}function v(o){o.preventDefault(),o.stopPropagation()}let d=me();function s(){let o=l(a.panel);if(!o)return;function r(){A(d.value,{[O.Forwards]:()=>N(o,T.First),[O.Backwards]:()=>N(o,T.Last)})===x.Error&&N(ne().filter(n=>n.dataset.headlessuiFocusGuard!=="true"),A(d.value,{[O.Forwards]:T.Next,[O.Backwards]:T.Previous}),{relativeTo:l(a.button)})}r()}return()=>{let o=a.popoverState.value===0,r={open:o},{...n}=e,y=g.value?{ref:$,type:f.value,onKeydown:u,onClick:k}:{ref:$,id:w,type:f.value,"aria-expanded":a.popoverState.value===0,"aria-controls":l(a.panel)?a.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:u,onKeyup:m,onClick:k,onMousedown:v};return D(ee,[ae({ourProps:y,theirProps:{...P,...n},slot:r,attrs:P,slots:S,name:"PopoverButton"}),o&&!g.value&&a.isPortalled.value&&D(Y,{id:b,features:Z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:s})])}}}),Je=q({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:P,slots:S,expose:B}){var h;let w=(h=e.id)!=null?h:`headlessui-popover-panel-${G()}`,{focus:a}=e,t=re("PopoverPanel"),i=E(()=>le(t.panel)),c=`headlessui-focus-sentinel-before-${G()}`,p=`headlessui-focus-sentinel-after-${G()}`;B({el:t.panel,$el:t.panel}),oe(()=>{t.panelId.value=w}),be(()=>{t.panelId.value=null}),ge(Se,t.panelId),_(()=>{var v,d;if(!a||t.popoverState.value!==0||!t.panel)return;let s=(v=i.value)==null?void 0:v.activeElement;(d=l(t.panel))!=null&&d.contains(s)||N(l(t.panel),T.First)});let g=Le(),$=E(()=>g!==null?(g.value&U.Open)===U.Open:t.popoverState.value===0);function b(v){var d,s;switch(v.key){case M.Escape:if(t.popoverState.value!==0||!l(t.panel)||i.value&&!((d=l(t.panel))!=null&&d.contains(i.value.activeElement)))return;v.preventDefault(),v.stopPropagation(),t.closePopover(),(s=l(t.button))==null||s.focus();break}}function f(v){var d,s,o,r,n;let y=v.relatedTarget;y&&l(t.panel)&&((d=l(t.panel))!=null&&d.contains(y)||(t.closePopover(),((o=(s=l(t.beforePanelSentinel))==null?void 0:s.contains)!=null&&o.call(s,y)||(n=(r=l(t.afterPanelSentinel))==null?void 0:r.contains)!=null&&n.call(r,y))&&y.focus({preventScroll:!0})))}let u=me();function m(){let v=l(t.panel);if(!v)return;function d(){A(u.value,{[O.Forwards]:()=>{var s;N(v,T.First)===x.Error&&((s=l(t.afterPanelSentinel))==null||s.focus())},[O.Backwards]:()=>{var s;(s=l(t.button))==null||s.focus({preventScroll:!0})}})}d()}function k(){let v=l(t.panel);if(!v)return;function d(){A(u.value,{[O.Forwards]:()=>{let s=l(t.button),o=l(t.panel);if(!s)return;let r=ne(),n=r.indexOf(s),y=r.slice(0,n+1),F=[...r.slice(n+1),...y];for(let I of F.slice())if(I.dataset.headlessuiFocusGuard==="true"||o!=null&&o.contains(I)){let R=F.indexOf(I);R!==-1&&F.splice(R,1)}N(F,T.First,{sorted:!1})},[O.Backwards]:()=>{var s;N(v,T.Previous)===x.Error&&((s=l(t.button))==null||s.focus())}})}d()}return()=>{let v={open:t.popoverState.value===0,close:t.close},{focus:d,...s}=e,o={ref:t.panel,id:w,onKeydown:b,onFocusout:a&&t.popoverState.value===0?f:void 0,tabIndex:-1};return ae({ourProps:o,theirProps:{...P,...s},attrs:P,slot:v,slots:{...S,default:(...r)=>{var n;return[D(ee,[$.value&&t.isPortalled.value&&D(Y,{id:c,ref:t.beforePanelSentinel,features:Z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:m}),(n=S.default)==null?void 0:n.call(S,...r),$.value&&t.isPortalled.value&&D(Y,{id:p,ref:t.afterPanelSentinel,features:Z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:k})])]}},features:fe.RenderStrategy|fe.Static,visible:$.value,name:"PopoverPanel"})}}});const X=Ee(ue.ui.strategy,ue.ui.popover,ze),Qe=q({components:{HPopover:he,HPopoverButton:We,HPopoverPanel:Je},inheritAttrs:!1,props:{mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:()=>X.default.openDelay},closeDelay:{type:Number,default:()=>X.default.closeDelay},overlay:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:open"],setup(e,{emit:P}){const{ui:S,attrs:B}=Fe("popover",se(e,"ui"),X,se(e,"class")),h=E(()=>Be(e.mode==="hover"?{offsetDistance:0}:{},e.popper,S.value.popper)),[w,a]=Re(h.value),t=C(null),i=C(null);let c=null,p=null;oe(()=>{var m,k;const f=(m=t.value)==null?void 0:m.$.provides;if(!f)return;const u=Object.getOwnPropertySymbols(f);i.value=u.length&&f[u[0]],e.open&&((k=i.value)==null||k.togglePopover())});const g=E(()=>{var k,v,d;if(e.mode!=="hover")return{};const f=((k=e.popper)==null?void 0:k.offsetDistance)||((v=S.value.popper)==null?void 0:v.offsetDistance)||8,u=(d=h.value.placement)==null?void 0:d.split("-")[0],m=`${f}px`;return u==="top"||u==="bottom"?{paddingTop:m,paddingBottom:m}:u==="left"||u==="right"?{paddingLeft:m,paddingRight:m}:{paddingTop:m,paddingBottom:m,paddingLeft:m,paddingRight:m}});function $(){e.mode!=="hover"||!i.value||(p&&(clearTimeout(p),p=null),i.value.popoverState!==0&&(c=c||setTimeout(()=>{i.value.togglePopover&&i.value.togglePopover(),c=null},e.openDelay)))}function b(){e.mode!=="hover"||!i.value||(c&&(clearTimeout(c),c=null),i.value.popoverState!==1&&(p=p||setTimeout(()=>{i.value.closePopover&&i.value.closePopover(),p=null},e.closeDelay)))}return ie(()=>e.open,(f,u)=>{i.value&&(u===void 0||f===u||(f?i.value.popoverState=0:i.value.closePopover()))}),ie(()=>{var f;return(f=i.value)==null?void 0:f.popoverState},(f,u)=>{u===void 0||f===u||P("update:open",f===0)}),Me(()=>$e("$i8qrF5GnO0")),{ui:S,attrs:B,popover:t,popper:h,trigger:w,container:a,containerStyle:g,onMouseOver:$,onMouseLeave:b}}}),Ve=["disabled"];function Xe(e,P,S,B,h,w){const a=W("HPopoverButton"),t=W("HPopoverPanel"),i=W("HPopover");return H(),pe(i,Q({ref:"popover",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:L(({open:c,close:p})=>[J(a,{ref:"trigger",as:"div",disabled:e.disabled,class:j(e.ui.trigger),role:"button",onMouseover:e.onMouseOver},{default:L(()=>[ve(e.$slots,"default",{open:c,close:p},()=>[de("button",{disabled:e.disabled}," Open ",8,Ve)])]),_:2},1032,["disabled","class","onMouseover"]),e.overlay?(H(),pe(ce,Q({key:0,appear:""},e.ui.overlay.transition),{default:L(()=>[c?(H(),V("div",{key:0,class:j([e.ui.overlay.base,e.ui.overlay.background])},null,2)):K("",!0)]),_:2},1040)):K("",!0),c?(H(),V("div",{key:1,ref:"container",class:j([e.ui.container,e.ui.width]),style:Ie(e.containerStyle),onMouseover:P[0]||(P[0]=(...g)=>e.onMouseOver&&e.onMouseOver(...g))},[J(ce,Q({appear:""},e.ui.transition),{default:L(()=>[de("div",null,[e.popper.arrow?(H(),V("div",{key:0,"data-popper-arrow":"",class:j(Object.values(e.ui.arrow))},null,2)):K("",!0),J(t,{class:j([e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow]),static:""},{default:L(()=>[ve(e.$slots,"panel",{open:c,close:p})]),_:2},1032,["class"])])]),_:2},1040)],38)):K("",!0)]),_:3},16,["class","onMouseleave"])}const ro=Ce(Qe,[["render",Xe]]);export{ro as default};
