import{aB as $e,s as z,v as k,r as C,B as ce,D as X,y as T,F as x,x as _,C as fe,E as ee,_ as ke,G as Ce,H as ne,K as Ee,L as re,k as Oe,ac as ue,A as V,o as N,P as se,w as H,b as U,O as A,R as ie,a as pe,U as ve,V as W,c as q,a0 as G,ae as Be}from"./entry.NvCQENbP.js";import{u as Fe}from"./usePopper.KiADX4aD.js";import{o as n,u as M,H as oe,t as j,N as de,a as D}from"./dom.r7maxUV6.js";import{m as te,E as ae,w as Te,h as De,P as I,N as B,T as Z}from"./focus-management.iJl3U2bx.js";import{c as Ie,l as K,p as Me}from"./open-closed.zTUQdaKQ.js";import{b as Ne}from"./use-resolve-button-type.CEI_jikC.js";import{y as He}from"./use-outside-click.Y1Hx-r82.js";import{V as Ae,p as je,E as Le,n as ge,d as F}from"./use-root-containers.GntivdaD.js";import{f as J,a as Q}from"./hidden.KPgWg9-Y.js";const Re={wrapper:"relative",container:"z-50 group",trigger:"inline-flex w-full",width:"",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-md",ring:"ring-1 ring-gray-200 dark:ring-gray-800",base:"overflow-hidden focus:outline-none relative",transition:{enterActiveClass:"transition ease-out duration-200",enterFromClass:"opacity-0 translate-y-1",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"transition ease-in duration-150",leaveFromClass:"opacity-100 translate-y-0",leaveToClass:"opacity-0 translate-y-1"},overlay:{base:"fixed inset-0 transition-opacity z-50",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enterActiveClass:"ease-out duration-200",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in duration-150",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"}},popper:{strategy:"fixed"},default:{openDelay:0,closeDelay:0},arrow:$e};var Ge=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ge||{});let me=Symbol("PopoverContext");function le(e){let S=ee(me,null);if(S===null){let h=new Error(`<${e} /> is missing a parent <${Pe.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(h,le),h}return S}let Ke=Symbol("PopoverGroupContext");function be(){return ee(Ke,null)}let ye=Symbol("PopoverPanelContext");function ze(){return ee(ye,null)}let Pe=z({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:S,attrs:h,expose:E}){var t;let o=k(null);E({el:o,$el:o});let b=k(1),g=k(null),c=k(null),f=k(null),i=k(null),w=C(()=>te(o)),O=C(()=>{var l,u;if(!n(g)||!n(i))return!1;for(let R of document.querySelectorAll("body > *"))if(Number(R==null?void 0:R.contains(n(g)))^Number(R==null?void 0:R.contains(n(i))))return!0;let d=ae(),$=d.indexOf(n(g)),L=($+d.length-1)%d.length,Se=($+1)%d.length,he=d[L],we=d[Se];return!((l=n(i))!=null&&l.contains(he))&&!((u=n(i))!=null&&u.contains(we))}),y={popoverState:b,buttonId:k(null),panelId:k(null),panel:i,button:g,isPortalled:O,beforePanelSentinel:c,afterPanelSentinel:f,togglePopover(){b.value=M(b.value,{0:1,1:0})},closePopover(){b.value!==1&&(b.value=1)},close(l){y.closePopover();let u=l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?n(l):n(y.button):n(y.button);u==null||u.focus()}};ce(me,y),Ie(C(()=>M(b.value,{0:K.Open,1:K.Closed})));let P={buttonId:y.buttonId,panelId:y.panelId,close(){y.closePopover()}},p=be(),r=p==null?void 0:p.registerPopover,[v,s]=Ae(),a=je({mainTreeNodeRef:p==null?void 0:p.mainTreeNodeRef,portals:v,defaultContainers:[g,i]});function m(){var l,u,d,$;return($=p==null?void 0:p.isFocusWithinPopoverGroup())!=null?$:((l=w.value)==null?void 0:l.activeElement)&&(((u=n(g))==null?void 0:u.contains(w.value.activeElement))||((d=n(i))==null?void 0:d.contains(w.value.activeElement)))}return X(()=>r==null?void 0:r(P)),Le((t=w.value)==null?void 0:t.defaultView,"focus",l=>{var u,d;l.target!==window&&l.target instanceof HTMLElement&&b.value===0&&(m()||g&&i&&(a.contains(l.target)||(u=n(y.beforePanelSentinel))!=null&&u.contains(l.target)||(d=n(y.afterPanelSentinel))!=null&&d.contains(l.target)||y.closePopover()))},!0),He(a.resolveContainers,(l,u)=>{var d;y.closePopover(),Te(u,De.Loose)||(l.preventDefault(),(d=n(g))==null||d.focus())},C(()=>b.value===0)),()=>{let l={open:b.value===0,close:y.close};return T(x,[T(s,{},()=>oe({theirProps:{...e,...h},ourProps:{ref:o},slot:l,slots:S,attrs:h,name:"Popover"})),T(a.MainTreeNode)])}}}),Ve=z({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${j()}`}},inheritAttrs:!1,setup(e,{attrs:S,slots:h,expose:E}){let t=le("PopoverButton"),o=C(()=>te(t.button));E({el:t.button,$el:t.button}),_(()=>{t.buttonId.value=e.id}),fe(()=>{t.buttonId.value=null});let b=be(),g=b==null?void 0:b.closeOthers,c=ze(),f=C(()=>c===null?!1:c.value===t.panelId.value),i=k(null),w=`headlessui-focus-sentinel-${j()}`;f.value||X(()=>{t.button.value=i.value});let O=Ne(C(()=>({as:e.as,type:S.type})),i);function y(a){var m,l,u,d,$;if(f.value){if(t.popoverState.value===1)return;switch(a.key){case D.Space:case D.Enter:a.preventDefault(),(l=(m=a.target).click)==null||l.call(m),t.closePopover(),(u=n(t.button))==null||u.focus();break}}else switch(a.key){case D.Space:case D.Enter:a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(g==null||g(t.buttonId.value)),t.togglePopover();break;case D.Escape:if(t.popoverState.value!==0)return g==null?void 0:g(t.buttonId.value);if(!n(t.button)||(d=o.value)!=null&&d.activeElement&&!(($=n(t.button))!=null&&$.contains(o.value.activeElement)))return;a.preventDefault(),a.stopPropagation(),t.closePopover();break}}function P(a){f.value||a.key===D.Space&&a.preventDefault()}function p(a){var m,l;e.disabled||(f.value?(t.closePopover(),(m=n(t.button))==null||m.focus()):(a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(g==null||g(t.buttonId.value)),t.togglePopover(),(l=n(t.button))==null||l.focus()))}function r(a){a.preventDefault(),a.stopPropagation()}let v=ge();function s(){let a=n(t.panel);if(!a)return;function m(){M(v.value,{[F.Forwards]:()=>I(a,B.First),[F.Backwards]:()=>I(a,B.Last)})===Z.Error&&I(ae().filter(l=>l.dataset.headlessuiFocusGuard!=="true"),M(v.value,{[F.Forwards]:B.Next,[F.Backwards]:B.Previous}),{relativeTo:n(t.button)})}m()}return()=>{let a=t.popoverState.value===0,m={open:a},{id:l,...u}=e,d=f.value?{ref:i,type:O.value,onKeydown:y,onClick:p}:{ref:i,id:l,type:O.value,"aria-expanded":t.popoverState.value===0,"aria-controls":n(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:y,onKeyup:P,onClick:p,onMousedown:r};return T(x,[oe({ourProps:d,theirProps:{...S,...u},slot:m,attrs:S,slots:h,name:"PopoverButton"}),a&&!f.value&&t.isPortalled.value&&T(J,{id:w,features:Q.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:s})])}}}),Ue=z({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${j()}`}},inheritAttrs:!1,setup(e,{attrs:S,slots:h,expose:E}){let{focus:t}=e,o=le("PopoverPanel"),b=C(()=>te(o.panel)),g=`headlessui-focus-sentinel-before-${j()}`,c=`headlessui-focus-sentinel-after-${j()}`;E({el:o.panel,$el:o.panel}),_(()=>{o.panelId.value=e.id}),fe(()=>{o.panelId.value=null}),ce(ye,o.panelId),X(()=>{var r,v;if(!t||o.popoverState.value!==0||!o.panel)return;let s=(r=b.value)==null?void 0:r.activeElement;(v=n(o.panel))!=null&&v.contains(s)||I(n(o.panel),B.First)});let f=Me(),i=C(()=>f!==null?(f.value&K.Open)===K.Open:o.popoverState.value===0);function w(r){var v,s;switch(r.key){case D.Escape:if(o.popoverState.value!==0||!n(o.panel)||b.value&&!((v=n(o.panel))!=null&&v.contains(b.value.activeElement)))return;r.preventDefault(),r.stopPropagation(),o.closePopover(),(s=n(o.button))==null||s.focus();break}}function O(r){var v,s,a,m,l;let u=r.relatedTarget;u&&n(o.panel)&&((v=n(o.panel))!=null&&v.contains(u)||(o.closePopover(),((a=(s=n(o.beforePanelSentinel))==null?void 0:s.contains)!=null&&a.call(s,u)||(l=(m=n(o.afterPanelSentinel))==null?void 0:m.contains)!=null&&l.call(m,u))&&u.focus({preventScroll:!0})))}let y=ge();function P(){let r=n(o.panel);if(!r)return;function v(){M(y.value,{[F.Forwards]:()=>{var s;I(r,B.First)===Z.Error&&((s=n(o.afterPanelSentinel))==null||s.focus())},[F.Backwards]:()=>{var s;(s=n(o.button))==null||s.focus({preventScroll:!0})}})}v()}function p(){let r=n(o.panel);if(!r)return;function v(){M(y.value,{[F.Forwards]:()=>{let s=n(o.button),a=n(o.panel);if(!s)return;let m=ae(),l=m.indexOf(s),u=m.slice(0,l+1),d=[...m.slice(l+1),...u];for(let $ of d.slice())if($.dataset.headlessuiFocusGuard==="true"||a!=null&&a.contains($)){let L=d.indexOf($);L!==-1&&d.splice(L,1)}I(d,B.First,{sorted:!1})},[F.Backwards]:()=>{var s;I(r,B.Previous)===Z.Error&&((s=n(o.button))==null||s.focus())}})}v()}return()=>{let r={open:o.popoverState.value===0,close:o.close},{id:v,focus:s,...a}=e,m={ref:o.panel,id:v,onKeydown:w,onFocusout:t&&o.popoverState.value===0?O:void 0,tabIndex:-1};return oe({ourProps:m,theirProps:{...S,...a},attrs:S,slot:r,slots:{...h,default:(...l)=>{var u;return[T(x,[i.value&&o.isPortalled.value&&T(J,{id:g,ref:o.beforePanelSentinel,features:Q.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:P}),(u=h.default)==null?void 0:u.call(h,...l),i.value&&o.isPortalled.value&&T(J,{id:c,ref:o.afterPanelSentinel,features:Q.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:p})])]}},features:de.RenderStrategy|de.Static,visible:i.value,name:"PopoverPanel"})}}});const Y=Ce(ne.ui.strategy,ne.ui.popover,Re),We=z({components:{HPopover:Pe,HPopoverButton:Ve,HPopoverPanel:Ue},inheritAttrs:!1,props:{mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:()=>Y.default.openDelay},closeDelay:{type:Number,default:()=>Y.default.closeDelay},overlay:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:open"],setup(e,{emit:S}){const{ui:h,attrs:E}=Ee("popover",re(e,"ui"),Y,re(e,"class")),t=C(()=>Oe(e.mode==="hover"?{offsetDistance:0}:{},e.popper,h.value.popper)),[o,b]=Fe(t.value),g=k(null),c=k(null);let f=null,i=null;_(()=>{var r,v;const P=(r=g.value)==null?void 0:r.$.provides;if(!P)return;const p=Object.getOwnPropertySymbols(P);c.value=p.length&&P[p[0]],e.open&&((v=c.value)==null||v.togglePopover())});const w=C(()=>{var v,s,a;if(e.mode!=="hover")return{};const P=((v=e.popper)==null?void 0:v.offsetDistance)||((s=h.value.popper)==null?void 0:s.offsetDistance)||8,p=(a=t.value.placement)==null?void 0:a.split("-")[0],r=`${P}px`;return p==="top"||p==="bottom"?{paddingTop:r,paddingBottom:r}:p==="left"||p==="right"?{paddingLeft:r,paddingRight:r}:{paddingTop:r,paddingBottom:r,paddingLeft:r,paddingRight:r}});function O(){e.mode!=="hover"||!c.value||(i&&(clearTimeout(i),i=null),c.value.popoverState!==0&&(f=f||setTimeout(()=>{c.value.togglePopover&&c.value.togglePopover(),f=null},e.openDelay)))}function y(){e.mode!=="hover"||!c.value||(f&&(clearTimeout(f),f=null),c.value.popoverState!==1&&(i=i||setTimeout(()=>{c.value.closePopover&&c.value.closePopover(),i=null},e.closeDelay)))}return ue(()=>e.open,(P,p)=>{c.value&&(p===void 0||P===p||(P?c.value.popoverState=0:c.value.closePopover()))}),ue(()=>{var P;return(P=c.value)==null?void 0:P.popoverState},(P,p)=>{p===void 0||P===p||S("update:open",P===0)}),{ui:h,attrs:E,popover:g,popper:t,trigger:o,container:b,containerStyle:w,onMouseOver:O,onMouseLeave:y}}}),qe=["disabled"];function Ye(e,S,h,E,t,o){const b=V("HPopoverButton"),g=V("HPopoverPanel"),c=V("HPopover");return N(),se(c,W({ref:"popover",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:H(({open:f,close:i})=>[U(b,{ref:"trigger",as:"div",disabled:e.disabled,class:A(e.ui.trigger),role:"button",onMouseover:e.onMouseOver},{default:H(()=>[ie(e.$slots,"default",{open:f,close:i},()=>[pe("button",{disabled:e.disabled}," Open ",8,qe)])]),_:2},1032,["disabled","class","onMouseover"]),e.overlay?(N(),se(ve,W({key:0,appear:""},e.ui.overlay.transition),{default:H(()=>[f?(N(),q("div",{key:0,class:A([e.ui.overlay.base,e.ui.overlay.background])},null,2)):G("",!0)]),_:2},1040)):G("",!0),f?(N(),q("div",{key:1,ref:"container",class:A([e.ui.container,e.ui.width]),style:Be(e.containerStyle),onMouseover:S[0]||(S[0]=(...w)=>e.onMouseOver&&e.onMouseOver(...w))},[U(ve,W({appear:""},e.ui.transition),{default:H(()=>[pe("div",null,[e.popper.arrow?(N(),q("div",{key:0,"data-popper-arrow":"",class:A(Object.values(e.ui.arrow))},null,2)):G("",!0),U(g,{class:A([e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow]),static:""},{default:H(()=>[ie(e.$slots,"panel",{open:f,close:i})]),_:2},1032,["class"])])]),_:2},1040)],38)):G("",!0)]),_:3},16,["class","onMouseleave"])}const ao=ke(We,[["render",Ye]]);export{ao as default};
